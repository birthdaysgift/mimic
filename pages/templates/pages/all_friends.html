{% load static %}
<!--TODO: add mutual friends list-->
<div class="all-friends-background">
    <div class="all-friends">
        <div class="friends-header">
            <h4 class="friends-header-text text-center">Friends</h4>
        </div>
        <!--TODO: if user == current_user add mutual friends, requests and etc..-->
        <div class="friends-list">
            <!--TODO: max-height instead of height and vertical alignment-->
            {% for friend in friends %}
                <div class="friends-list-icon">
                    <!--This links are used in js-->
                    <a class="friend-link" href="{% url 'pages:page' friend.username %}"></a>
                    {% if friend.avatar %}
                        <img src="{{ friend.avatar.url }}" class="contact-avatar">
                    {% else %}
                        <img src="{% static 'pages/img/avatar_placeholder.png' %}" class="contact-avatar">
                    {% endif %}
                    <a href="{% url 'pages:page' friend.username %}">
                        <b class="contact-username-text">{{ friend.username }}</b>
                    </a>
                    {% if friend in session_user_friends %}
                        <img class="friends-icon" src="{% static 'pages/img/friends.png' %}">
                    {% endif %}
                    <a class="write-message-btn text-center" href="{% url 'talks:talk' friend.username 1 %}">Write a message</a>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
<script>
    var url = "{% static 'pages/js/all_friends.js' %}";
    $.getScript(url);
</script>

